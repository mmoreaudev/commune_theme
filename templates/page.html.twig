{#
  Page template for Morton Theme
  Includes header with responsive menu, main content region and footer.
  Accessibility: ARIA attributes, skip link, keyboard-focusable controls
#}
<!doctype html>
<html lang="fr">
  <head>
    <head-placeholder token="{{ placeholder_token }}"></head-placeholder>
    <title>{{ head_title }}</title>
    {{ attach_library('morton_theme/cdn') }}
    {{ attach_library('morton_theme/global') }}
    {# Tailwind inline config to ensure accessible color palette and reduced motion #}
    <script>
      tailwind = tailwind || {};
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#0f172a',
              accent: '#0ea5a4',
              muted: '#64748b'
            }
          }
        }
      };
    </script>
  </head>
  <body class="min-h-screen bg-white text-gray-900 font-sans leading-normal antialiased">
    <a class="sr-only focus:not-sr-only" href="#main-content">Aller au contenu</a>

    <header class="bg-white border-b" role="banner">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          <div class="flex items-center gap-4">
            <a href="{{ path('<front>') }}" class="flex items-center" aria-label="Accueil Morton">
              <img src="/themes/morton_theme/logo.svg" alt="Logo Morton" class="h-10 w-auto"/>
              <span class="ml-3 text-xl font-semibold text-primary">Morton (86)</span>
            </a>
          </div>

          <nav class="hidden md:flex md:items-center md:space-x-6" aria-label="Menu principal">
            {{ page.primary_menu }}
          </nav>

          <div class="flex items-center md:hidden">
            <button id="morton-menu-toggle" aria-controls="mobile-menu" aria-expanded="false" aria-label="Ouvrir le menu" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-accent">
              <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile menu, show/hide based on menu state. -->
      <div id="mobile-menu" class="hidden md:hidden" role="navigation" aria-label="Menu mobile">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
          {{ page.primary_menu }}
        </div>
      </div>
    </header>

    <main id="main-content" class="flex-auto" role="main">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {% if messages %}
          <div class="mb-4">{{ messages }}</div>
        {% endif %}

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
          <div class="lg:col-span-8">
            {{ page.content }}
          </div>
          <aside class="lg:col-span-4" role="complementary">
            {{ page.sidebar_first }}
          </aside>
        </div>
      </div>
    </main>

    <footer class="bg-gray-50 border-t mt-12" role="contentinfo">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div>
            <h3 class="text-lg font-semibold">Contact</h3>
            <p class="mt-2 text-sm text-muted">Mairie de Morton<br/>Adresse de la mairie<br/>Tél. : <a href="tel:+33000000000" class="text-accent">00 00 00 00 00</a></p>
          </div>
          <div>
            <h3 class="text-lg font-semibold">Liens utiles</h3>
            <ul class="mt-2 space-y-1 text-sm">
              <li><a href="#" class="text-primary hover:underline">Services municipaux</a></li>
              <li><a href="#" class="text-primary hover:underline">Urbanisme</a></li>
              <li><a href="#" class="text-primary hover:underline">Événements</a></li>
            </ul>
          </div>
          <div>
            <h3 class="text-lg font-semibold">Réseaux sociaux</h3>
            <div class="mt-2 flex items-center space-x-3">
              <a href="#" class="text-muted hover:text-accent" aria-label="Facebook"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a>
              <a href="#" class="text-muted hover:text-accent" aria-label="Twitter"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
              <a href="#" class="text-muted hover:text-accent" aria-label="Instagram"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
            </div>
          </div>
        </div>

        <div class="mt-8 text-xs text-muted">
          <p>© {{ "now"|date("Y") }} Commune de Morton — Tous droits réservés.</p>
        </div>
      </div>
    </footer>

  </body>
</html>
