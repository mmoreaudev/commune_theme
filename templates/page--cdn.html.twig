{#
/**
 * @file
 * Template principal pour le thème Commune CDN
 * Compatible Drupal 11 avec CDN uniquement
 */
#}
<!DOCTYPE html>
<html{{ html_attributes.addClass('no-js').setAttribute('lang', 'fr') }}>
<head>
  <head-placeholder token="{{ placeholder_token }}">
  <title>{{ head_title|safe_join(' | ') }}</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  {# CDN - Tailwind CSS #}
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'commune': {
              50: '#eff6ff',
              100: '#dbeafe',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a'
            }
          }
        }
      }
    }
  </script>
  
  {# CDN - Alpine.js #}
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  {# Polices Google #}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <css-placeholder token="{{ placeholder_token }}">
  <js-placeholder token="{{ placeholder_token }}">
</head>

<body{{ attributes.addClass(['font-sans', 'bg-gray-50']) }} x-data="{ mobileMenuOpen: false }">
  
  {# Skip links pour accessibilité #}
  <div class="skip-links">
    <a href="#main-content" class="skip-link">{{ 'Aller au contenu principal'|t }}</a>
    <a href="#main-navigation" class="skip-link">{{ 'Aller au menu'|t }}</a>
  </div>

  <div class="page-wrapper">
    
    {# Header #}
    <header class="bg-white shadow-sm">
      {{ page.page_top }}
      
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          
          {# Logo #}
          {% if site_logo %}
            <div class="flex-shrink-0">
              <a href="{{ path('<front>') }}" class="flex items-center">
                <img class="h-12 w-auto" src="{{ site_logo }}" alt="{{ site_name }}">
                {% if site_name and not hide_site_name %}
                  <span class="ml-3 text-xl font-semibold text-gray-900">{{ site_name }}</span>
                {% endif %}
              </a>
            </div>
          {% endif %}
          
          {# Menu desktop #}
          <nav class="hidden md:block" id="main-navigation">
            {{ page.primary_menu }}
          </nav>
          
          {# Bouton menu mobile #}
          <div class="md:hidden">
            <button @click="mobileMenuOpen = !mobileMenuOpen" class="text-gray-600 hover:text-gray-900 p-2">
              <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
        </div>
      </div>
      
      {# Menu mobile #}
      <div x-show="mobileMenuOpen" 
           x-transition
           class="md:hidden bg-white border-t border-gray-200">
        <div class="px-4 py-2">
          {{ page.primary_menu }}
        </div>
      </div>
      
      {{ page.header }}
    </header>

    {# Hero section #}
    {% if page.hero %}
      <section class="hero bg-gradient-to-r from-commune-700 to-commune-900 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          {{ page.hero }}
        </div>
      </section>
    {% endif %}

    {# Messages #}
    {% if page.highlighted %}
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        {{ page.highlighted }}
      </div>
    {% endif %}

    {# Main content #}
    <main class="flex-1">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        {# Breadcrumb #}
        {% if breadcrumb %}
          <nav aria-label="Breadcrumb" class="mb-6">
            {{ breadcrumb }}
          </nav>
        {% endif %}

        <div class="{% if page.sidebar_first %}lg:grid lg:grid-cols-4 lg:gap-8{% endif %}">
          
          {# Content #}
          <div class="{% if page.sidebar_first %}lg:col-span-3{% endif %}">
            {{ page.content }}
          </div>

          {# Sidebar #}
          {% if page.sidebar_first %}
            <aside class="lg:col-span-1 mt-8 lg:mt-0">
              {{ page.sidebar_first }}
            </aside>
          {% endif %}
        </div>
      </div>
    </main>

    {# Footer #}
    <footer class="bg-gray-800 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {{ page.footer }}
        
        <div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-400">
          <p>&copy; {{ 'now'|date('Y') }} {{ site_name }}. {{ 'Tous droits réservés.'|t }}</p>
        </div>
      </div>
      
      {{ page.page_bottom }}
    </footer>
  </div>

  <script>
    // Retirer la classe no-js
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>
</body>
</html>